[{"id":"uHzMLwomhmcqpXVm","name":"Comment","slug":"comment","relativePathFromProjectRoot":"/tools/control-fs/fs-util/src/deprecated.ts","srcFileId":"/deprecated","operationFolderName":"fs-util","relativeFilePathFromSrc":"/deprecated.ts","relativeOperationBasePathFromProjectRoot":"/tools/control-fs/fs-util","operationName":"fs-util","comment":"node packages","rawStatement":"import path from \"path\";","parameters":{},"types":[],"firstLine":1,"lastLine":1},{"id":"uHzMLwomhmcqpXVm","name":"Comment","slug":"comment","relativePathFromProjectRoot":"/tools/control-fs/fs-util/src/deprecated.ts","srcFileId":"/deprecated","operationFolderName":"fs-util","relativeFilePathFromSrc":"/deprecated.ts","relativeOperationBasePathFromProjectRoot":"/tools/control-fs/fs-util","operationName":"fs-util","comment":"external packages","rawStatement":"import { readdirSync } from \"graceful-fs\";","parameters":{},"types":[],"firstLine":3,"lastLine":3},{"id":"uHzMLwomhmcqpXVm","name":"Comment","slug":"comment","relativePathFromProjectRoot":"/tools/control-fs/fs-util/src/deprecated.ts","srcFileId":"/deprecated","operationFolderName":"fs-util","relativeFilePathFromSrc":"/deprecated.ts","relativeOperationBasePathFromProjectRoot":"/tools/control-fs/fs-util","operationName":"fs-util","comment":"monorepo","rawStatement":"import { mergeObjectsArray as mergeObjectsArrayJsUtil } from \"js-util\";","parameters":{},"types":[],"firstLine":5,"lastLine":5},{"id":"uHzMLwomhmcqpXVm","name":"Comment","slug":"comment","relativePathFromProjectRoot":"/tools/control-fs/fs-util/src/deprecated.ts","srcFileId":"/deprecated","operationFolderName":"fs-util","relativeFilePathFromSrc":"/deprecated.ts","relativeOperationBasePathFromProjectRoot":"/tools/control-fs/fs-util","operationName":"fs-util","comment":"internal functions","rawStatement":"import { FolderPath, Markdown, Path } from \"./types\";","parameters":{},"types":[],"firstLine":7,"lastLine":7},{"id":"uHzMLwomhmcqpXVm","name":"Comment","slug":"comment","relativePathFromProjectRoot":"/tools/control-fs/fs-util/src/deprecated.ts","srcFileId":"/deprecated","operationFolderName":"fs-util","relativeFilePathFromSrc":"/deprecated.ts","relativeOperationBasePathFromProjectRoot":"/tools/control-fs/fs-util","operationName":"fs-util","comment":"DEPRECATED:\n\nworks fine but this requires us to know exactly what we want from the file, so it requires a very clear convention.\nbetter would be to introspect the code and just require whatever's there\nreturns T[] where every T is one of:\n- the default export (importStrategy \"default\")\n- the export with the name of the extension\n- an object with a subset of exports","rawStatement":"export const importFromFiles = <T>({\n  files,\n  importStrategy = \"default\",\n  list,\n  guard,\n}: {\n  files: Path[];\n  importStrategy?: \"default\" | \"fileName\" | \"list\";\n  list?: string[];\n  guard?: (moduleExports: any) => boolean;\n}) => {\n  return files\n    .map((filePath) => {\n      const moduleExports = require(filePath);\n      if (importStrategy === \"default\") {\n        return moduleExports.default || moduleExports;\n      } else if (importStrategy === \"fileName\") {\n        const fileName = withoutExtension(filePath.split(\"/\").pop()!);\n        return moduleExports[fileName];\n      } else if (importStrategy === \"list\") {\n        return list\n          ? mergeObjectsArray(\n              list.map((item) => {\n                return { [item]: moduleExports[item] };\n              })\n            )\n          : {};\n      }\n    })\n    .filter((moduleExport) =>\n      guard ? guard(moduleExport) && moduleExport : moduleExport\n    ) as T[];\n};","parameters":{},"types":[],"firstLine":12,"lastLine":22},{"id":"uHzMLwomhmcqpXVm","name":"Comment","slug":"comment","relativePathFromProjectRoot":"/tools/control-fs/fs-util/src/deprecated.ts","srcFileId":"/deprecated","operationFolderName":"fs-util","relativeFilePathFromSrc":"/deprecated.ts","relativeOperationBasePathFromProjectRoot":"/tools/control-fs/fs-util","operationName":"fs-util","comment":"DEPRECATED:\n\nthis is sensible-specific","rawStatement":"export const findSensibleFiles = (\n  slug: string,\n  basePath: string\n): FolderPath[] => {\n  return findFilesRecursively({\n    basePath,\n    match: (fileName) =>\n      fileName === slug ||\n      fileName === slug + \"s\" ||\n      fileName.endsWith(`.${slug}`) ||\n      fileName.endsWith(`.${slug}s`),\n  });\n};","parameters":{},"types":[],"firstLine":57,"lastLine":61},{"id":"uHzMLwomhmcqpXVm","name":"Comment","slug":"comment","relativePathFromProjectRoot":"/tools/control-fs/fs-util/src/deprecated.ts","srcFileId":"/deprecated","operationFolderName":"fs-util","relativeFilePathFromSrc":"/deprecated.ts","relativeOperationBasePathFromProjectRoot":"/tools/control-fs/fs-util","operationName":"fs-util","comment":"DEPRECATED:\n\nSHOULD BE REPLACED\n\nthis is sensible-specific","rawStatement":"export const findFiles = findSensibleFiles;","parameters":{},"types":[],"firstLine":75,"lastLine":81},{"id":"uHzMLwomhmcqpXVm","name":"Comment","slug":"comment","relativePathFromProjectRoot":"/tools/control-fs/fs-util/src/deprecated.ts","srcFileId":"/deprecated","operationFolderName":"fs-util","relativeFilePathFromSrc":"/deprecated.ts","relativeOperationBasePathFromProjectRoot":"/tools/control-fs/fs-util","operationName":"fs-util","comment":"DEPRECATED","rawStatement":"export const isArrayGuard = (moduleExports: any) =>\n  typeof moduleExports === \"object\" && Array.isArray(moduleExports);","parameters":{},"types":[],"firstLine":84,"lastLine":86},{"id":"uHzMLwomhmcqpXVm","name":"Comment","slug":"comment","relativePathFromProjectRoot":"/tools/control-fs/fs-util/src/deprecated.ts","srcFileId":"/deprecated","operationFolderName":"fs-util","relativeFilePathFromSrc":"/deprecated.ts","relativeOperationBasePathFromProjectRoot":"/tools/control-fs/fs-util","operationName":"fs-util","comment":"DEPRECATED: `k-explore` can be used","rawStatement":"export const findAllMd = (\n  folderPath: Path,\n  onlyInCurrentFolder?: boolean\n): Markdown[] => {\n  //1. find all md file paths recursively in this folder, but don't look in node_modules\n\n  const fileFolderPaths = findFilesRecursively({\n    basePath: folderPath,\n    match: (_, extension) => extension === \"md\",\n    onlyInCurrentFolder,\n  });\n\n  const filePaths = fileFolderPaths.map((x) => x.path);\n  const mdArray = filePaths.map(parseMd);\n  return mdArray;\n};","parameters":{},"types":[],"firstLine":90,"lastLine":92},{"id":"uHzMLwomhmcqpXVm","name":"Comment","slug":"comment","relativePathFromProjectRoot":"/tools/control-fs/fs-util/src/deprecated.ts","srcFileId":"/deprecated","operationFolderName":"fs-util","relativeFilePathFromSrc":"/deprecated.ts","relativeOperationBasePathFromProjectRoot":"/tools/control-fs/fs-util","operationName":"fs-util","comment":"DEPRECATED: in favor of mergeObjectsArray from \"js-util\"","rawStatement":"export const mergeObjectsArray = mergeObjectsArrayJsUtil;","parameters":{},"types":[],"firstLine":110,"lastLine":112},{"id":"uHzMLwomhmcqpXVm","name":"Comment","slug":"comment","relativePathFromProjectRoot":"/tools/control-fs/fs-util/src/deprecated.ts","srcFileId":"/deprecated","operationFolderName":"fs-util","relativeFilePathFromSrc":"/deprecated.ts","relativeOperationBasePathFromProjectRoot":"/tools/control-fs/fs-util","operationName":"fs-util","comment":"DEPRECATED: in favour of `explore` from \"k-explore\"","rawStatement":"export const findFilesRecursively = ({\n  match,\n  basePath,\n  relativePath,\n  onlyInSubFolders,\n  onlyInCurrentFolder,\n}: {\n  match: (fileName: string, extension: string) => boolean;\n  basePath: Path;\n  relativePath?: string;\n  /**\n   * only find files in folders of this location, not in this location itself\n   */\n  onlyInSubFolders?: boolean;\n  onlyInCurrentFolder?: boolean;\n}): FolderPath[] => {\n  const location = relativePath ? path.join(basePath, relativePath) : basePath;\n\n  const contents = readdirSync(location, { withFileTypes: true });\n\n  return contents.reduce((all, fileOrFolder) => {\n    if (fileOrFolder.isDirectory() && !onlyInCurrentFolder) {\n      const folder = fileOrFolder;\n      const thisFolder = findFilesRecursively({\n        basePath,\n        relativePath: relativePath\n          ? `${relativePath}/${folder.name}`\n          : folder.name,\n        match,\n        onlyInSubFolders: false,\n      });\n      const allWithThisFolder = all.concat(thisFolder);\n      return allWithThisFolder;\n    } else if (!onlyInSubFolders) {\n      const file = fileOrFolder;\n      const filePath: Path = path.join(location, file.name);\n      const allWithMatchedFile = match(\n        withoutExtension(file.name),\n        path.parse(file.name).ext\n      )\n        ? all.concat([{ relativeFolder: relativePath, path: filePath }])\n        : all;\n      return allWithMatchedFile;\n    }\n    return all;\n  }, [] as FolderPath[]);\n};","parameters":{},"types":[],"firstLine":115,"lastLine":117}]
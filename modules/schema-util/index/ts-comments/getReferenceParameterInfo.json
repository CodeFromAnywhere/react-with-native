[{"id":"AJpdcWEKWIwxseFu","name":"Comment","slug":"comment","relativePathFromProjectRoot":"/tools/typescript/schema-util/src/getReferenceParameterInfo.ts","srcFileId":"/getReferenceParameterInfo","operationFolderName":"schema-util","relativeFilePathFromSrc":"/getReferenceParameterInfo.ts","relativeOperationBasePathFromProjectRoot":"/tools/typescript/schema-util","operationName":"schema-util","comment":"Takes a parameterName and returns information about it according to the convention `{descriptorName}_{modelName}{referenceKey}` where:\n\n- descriptorName with the suffixing underscore is optional\n- referenceKey can be slug, index, or id (or there plural variants)\n- modelName should refer to a database model","rawStatement":"export const getReferenceParameterInfo = (\n  parameterName: string\n): ReferenceParameterInfo => {\n  const descriptorModelSplit = parameterName.split(\"_\");\n  const descriptor = parameterName.includes(\"_\")\n    ? descriptorModelSplit[0]\n    : undefined;\n  const rest = parameterName.includes(\"_\")\n    ? descriptorModelSplit[1]\n    : parameterName;\n\n  const wordArray = lowerCaseArray(rest);\n\n  const singleWord = wordArray.length === 1;\n\n  const parameterLastWord = wordArray.pop()!;\n\n  const isReferenceSingleParameter =\n    !singleWord && referenceParameterNames.includes(parameterLastWord);\n  const isReferenceMultipleParameter =\n    !singleWord && referencePluralParameterNames.includes(parameterLastWord);\n\n  const isReferenceParameter =\n    isReferenceSingleParameter || isReferenceMultipleParameter;\n\n  // NB: the last item has been removed now\n  const interfaceName = isReferenceParameter\n    ? pascalCase(wordArray.join(\"-\"))\n    : undefined;\n\n  const keyInModel = isReferenceParameter\n    ? makeSingular(parameterLastWord)\n    : undefined;\n\n  const referenceParameterInfo: ReferenceParameterInfo = {\n    descriptor,\n    keyInModel,\n    interfaceName,\n    isReferenceMultipleParameter,\n    isReferenceSingleParameter,\n    isReferenceParameter,\n  };\n\n  return referenceParameterInfo;\n};","parameters":{},"types":[],"firstLine":16,"lastLine":23}]
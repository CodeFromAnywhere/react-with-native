[{"id":"HYwarvczhvkQtRWN","name":"Comment","slug":"comment","relativePathFromProjectRoot":"/tools/parsing/file-conversion/csv/csv-util/src/csvItemToString.ts","srcFileId":"/csvItemToString","operationFolderName":"csv-util","relativeFilePathFromSrc":"/csvItemToString.ts","relativeOperationBasePathFromProjectRoot":"/tools/parsing/file-conversion/csv/csv-util","operationName":"csv-util","comment":"make csv string from a csv model type","rawStatement":"export const csvItemToString = <T extends CsvItemType>(\n  csvModelData: T[]\n): string => {\n  if (csvModelData.length === 0) return \"\";\n\n  // let propertyNames = simplifiedSchema?.properties?.map((x) => x.name);\n\n  const longestItem = csvModelData.reduce(\n    (previous, current) => {\n      const keysAmount = Object.keys(current).length;\n      if (keysAmount > previous.keysAmount) {\n        return { keysAmount, item: current };\n      }\n      return previous;\n    },\n    { keysAmount: 0, item: undefined } as {\n      keysAmount: number;\n      item: T | undefined;\n    }\n  ).item!;\n\n  const propertyNames = Object.keys(longestItem);\n\n  const headerString = propertyNames.join(\",\");\n\n  const rowStrings = csvModelData.map((row) => {\n    return propertyNames!\n      .map((propertyName) => String(row[propertyName]))\n      .join(\",\");\n  });\n\n  return `${headerString}\\n${rowStrings.join(\"\\n\")}`;\n};","parameters":{},"types":[],"firstLine":4,"lastLine":6}]
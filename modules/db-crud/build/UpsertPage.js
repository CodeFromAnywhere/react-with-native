"use strict";var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},__assign.apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.UpsertPage=void 0;var jsx_runtime_1=require("react/jsx-runtime"),api_1=require("api"),js_util_1=require("js-util"),react_with_native_1=require("react-with-native"),react_with_native_router_1=require("react-with-native-router"),schema_util_1=require("schema-util"),useInfiniteGetDbModel_1=require("./crud/useInfiniteGetDbModel"),UpsertForm_1=require("./UpsertForm"),useModelFromUrl_1=require("./useModelFromUrl"),UpsertPage=function(){var e,t,r,i,s,n=(0,react_with_native_router_1.useRouter)(),u=(0,js_util_1.mapValuesSync)(n.query,(function(e){return(0,js_util_1.takeFirst)(e)})),a=(0,useInfiniteGetDbModel_1.useInfiniteGetDbModel)(),l=null===(t=null===(e=null==a?void 0:a.data)||void 0===e?void 0:e.pages)||void 0===t?void 0:t.map((function(e){var t;return null===(t=e.result)||void 0===t?void 0:t.data})).flat().filter(js_util_1.notEmpty),o=null==l?void 0:l.find((function(e){return e.id===u.id})),_=(0,useModelFromUrl_1.useModelFromUrl)(),d=api_1.queries.useGetDbModelMetadata(_),c=(0,js_util_1.destructureOptionalObject)(null===(r=d.data)||void 0===r?void 0:r.result).tsInterface,p=null===(i=null==c?void 0:c.type)||void 0===i?void 0:i.simplifiedSchema,v=null===(s=(0,schema_util_1.getReferencableModels)(p))||void 0===s?void 0:s.map((function(e){return e.interfaceName})).filter(js_util_1.notEmpty);return(0,jsx_runtime_1.jsx)(react_with_native_1.Div,__assign({scroll:!0,className:"py-4 px-8 lg:px-20"},{children:!a.isLoading&&p&&_?(0,jsx_runtime_1.jsx)(UpsertForm_1.UpsertForm,{modelName:_,simplifiedSchema:p,instance:o,referencableModelNames:v}):null}))};exports.UpsertPage=UpsertPage;
//# sourceMappingURL=UpsertPage.js.map
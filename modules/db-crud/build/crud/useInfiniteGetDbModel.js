"use strict";var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},__assign.apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.useInfiniteGetDbModel=exports.defaultLimit=void 0;var api_1=require("api"),react_query_1=require("react-query"),store_1=require("../store"),useModelFromUrl_1=require("../useModelFromUrl"),getDbModel=api_1.api.getDbModel;exports.defaultLimit=50;var useInfiniteGetDbModel=function(){var e=(0,useModelFromUrl_1.useModelFromUrl)(),t=(0,store_1.useStore)("db-crud.datasetConfig")[0],r=(0,store_1.useStore)("db-crud.search")[0],i=["getDbModel",e,t,r];return(0,react_query_1.useInfiniteQuery)(i,(function(i){var o=i.pageParam,s=__assign(__assign({},t),{startFromIndex:((null==t?void 0:t.startFromIndex)||0)+((null==o?void 0:o.start)||0),maxRows:(null==t?void 0:t.maxRows)||(null==o?void 0:o.limit)||exports.defaultLimit});return getDbModel(e,s,r)}),{getNextPageParam:function(e,t){var r,i,o,s,a=(null===(i=null===(r=e.result)||void 0===r?void 0:r.datasetConfig)||void 0===i?void 0:i.maxRows)||exports.defaultLimit;return{start:((null===(s=null===(o=e.result)||void 0===o?void 0:o.datasetConfig)||void 0===s?void 0:s.startFromIndex)||0)+a,limit:a}}})};exports.useInfiniteGetDbModel=useInfiniteGetDbModel;
//# sourceMappingURL=useInfiniteGetDbModel.js.map
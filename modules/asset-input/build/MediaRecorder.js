"use strict";var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++)for(var t in r=arguments[i])Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e},__assign.apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MediaRecorder=exports.MediaRecorderComponent=void 0;var jsx_runtime_1=require("react/jsx-runtime"),ReactMediaRecorder_1=require("./ReactMediaRecorder"),react_1=require("react"),Audio=function(e){return(0,jsx_runtime_1.jsx)("audio",__assign({},e))},Video=function(e){return(0,jsx_runtime_1.jsx)("video",__assign({},e))},VideoPreview=function(e){var r=e.stream,i=(0,react_1.useRef)(null);return(0,react_1.useEffect)((function(){i.current&&r&&(i.current.srcObject=r)}),[r]),r?(0,jsx_runtime_1.jsx)("video",{ref:i,width:500,height:500,autoPlay:!0,controls:!0}):null},MediaRecorderComponent=function(e){var r=e.status,i=e.startRecording,n=e.stopRecording,t=e.pauseRecording,o=e.resumeRecording,s=(e.previewAudioStream,e.mediaBlobUrl),u=e.previewStream,d=e.type,a=e.muteAudio,c=e.unMuteAudio,_=e.isAudioMuted,l="audio"===d?Audio:Video,x="acquiring_media"===r?[]:"recording"===r?[(0,jsx_runtime_1.jsx)("button",__assign({onClick:n},{children:"⏹"}),"stop"),(0,jsx_runtime_1.jsx)("button",__assign({onClick:t},{children:"⏸"}),"pause"),"video"===d||"screen"===d?_?(0,jsx_runtime_1.jsx)("button",__assign({onClick:c},{children:"🔈"}),"unmute"):(0,jsx_runtime_1.jsx)("button",__assign({onClick:a},{children:"🔇"}),"mute"):void 0]:"paused"===r?[(0,jsx_runtime_1.jsx)("button",__assign({onClick:n},{children:"⏹"}),"stop"),(0,jsx_runtime_1.jsx)("button",__assign({onClick:o},{children:"▶️"}),"pause")]:[(0,jsx_runtime_1.jsx)("button",__assign({onClick:i},{children:"⏺"}),"start")];return(0,jsx_runtime_1.jsxs)("div",{children:[x,s&&"recording"!==r?(0,jsx_runtime_1.jsx)(l,{src:s,controls:!0,autoPlay:!0}):null,"video"===d&&u&&"recording"===r?(0,jsx_runtime_1.jsx)(VideoPreview,{stream:u}):null,// TODO: visualise with https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Visualizations_with_Web_Audio_API
null]})};exports.MediaRecorderComponent=MediaRecorderComponent;var MediaRecorder=function(e){var r=e.type,i=e.withBlob;return(0,jsx_runtime_1.jsx)("div",{children:(0,jsx_runtime_1.jsx)(ReactMediaRecorder_1.ReactMediaRecorder,{screen:"screen"===r,audio:!0,blobPropertyBag:{},
// audio={type === "audio"}
video:"video"===r,stopStreamsOnStop:!0,onStop:function(e,r){i(e,r)},render:function(e){return(0,jsx_runtime_1.jsx)(exports.MediaRecorderComponent,__assign({},e,{type:r}))}})})};exports.MediaRecorder=MediaRecorder;
//# sourceMappingURL=MediaRecorder.js.map